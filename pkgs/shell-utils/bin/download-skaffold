#!/usr/bin/env bash

download-skaffold() {
  local OS=linux
  local arch
  arch=$(uname -m)
  local dir
  dir=$(pwd)

  # usage
  [[ "$1" =~ --?h(elp)?  ]] && { echo "usage: download-skaffold /path/to/download/to" >&2; return 1; }
  [[ -n "$1" ]] && { dir="$1"; }


  # switch out for macOS if we have to
  [ "$(uname -s)" == "Darwin" ] && { OS=darwin; }

  wget -O "${dir}"/skaffold https://storage.googleapis.com/skaffold/releases/latest/skaffold-"${OS}"-"${arch}" && \
  chmod +x "${dir}"/skaffold
}

download-skaffold "$@"
