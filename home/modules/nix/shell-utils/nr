#!/usr/bin/env bash
set -euo pipefail

# Run a package from this flake's pinned nixpkgs without updating channels
# Usage: nr <pkg> [-- args]
nr() {
  local pkg="$1"; shift || true
  if [[ -z "$pkg" ]]; then
    echo "usage: nr <pkg> [-- args]" >&2
    exit 1
  fi
  nix run path:$HOME/src/github.com/jonpulsifer/dotfiles#''${pkg} -- "$@"
}

nr "$@"